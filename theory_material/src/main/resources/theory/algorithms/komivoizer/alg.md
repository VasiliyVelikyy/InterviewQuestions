# Алгоритм ветвей и границ

Рассмотрим пример задачи коммивояжера с матрицей расстояний 4×4. Мы применим метод ветвей и границ для нахождения
оптимального маршрута.

Дано:
Матрица расстояний между 4 городами (A, B, C, D):

|   | A    | 	B  | 	C  | 	D  |
|---|------|-----|-----|-----|
| A | 	0	  | 10  | 	15 | 	20 |
| B | 	10  | 	0  | 	35 | 	25 |
| C | 	15	 | 35  | 	0  | 30  |
| D | 	20  | 	25 | 	30 | 	0  |

### Шаги алгоритма:

1. Инициализация:
    - Начальный город: A.
    - Частичный маршрут: [A].
    - Верхняя граница (начальное приближение): Например, используем метод ближайшего соседа:
        - A → B (10) → D (25) → C (30) → A (15). Стоимость: 80.
        - Устанавливаем верхнюю границу = 80.

2. Вычисление нижней границы для начального узла:
    - Нижняя граница для узла [A]:
    - Минимальные рёбра из каждого города:
        - Из A: min(10, 15, 20) = 10.
        - Из B: min(10, 35, 25) = 10.
        - Из C: min(15, 35, 30) = 15.
        - Из D: min(20, 25, 30) = 20.
    - Сумма минимальных рёбер: 10 + 10 + 15 + 20 = 55.
    - Нижняя граница для узла [A]: 55.
3. Ветвление:
    - Создаём дочерние узлы для всех возможных следующих городов: [A, B], [A, C], [A, D].

4. Оценка дочерних узлов:
    - Узел [A, B]:
        - Пройденный путь: A → B (стоимость = 10).
        - Нижняя граница:
            - Минимальные рёбра из оставшихся городов (C, D):
            - Из C: min(15, 30) = 15.
            - Из D: min(25, 30) = 25.
        - Сумма: 10 (пройденный путь) + 15 + 25 = 50.
        - Нижняя граница: 50.

    - Узел [A, C]:
        - Пройденный путь: A → C (стоимость = 15).
        - Нижняя граница:
            - Минимальные рёбра из оставшихся городов (B, D):
                - Из B: min(10, 25) = 10.
                - Из D: min(20, 30) = 20.
            - Сумма: 15 + 10 + 20 = 45.
        - Нижняя граница: 45.

    - Узел [A, D]:
        - Пройденный путь: A → D (стоимость = 20).
        - Нижняя граница:
            - Минимальные рёбра из оставшихся городов (B, C):
                - Из B: min(10, 35) = 10.
                - Из C: min(15, 30) = 15.
            - Сумма: 20 + 10 + 15 = 45.
        - Нижняя граница: 45.

5. Выбор узла для дальнейшего исследования:
    - Выбираем узел с наименьшей нижней границей: [A, C] (45).

6. Ветвление узла [A, C]:
    - Создаём дочерние узлы: [A, C, B] и [A, C, D].

7. Оценка дочерних узлов:
    - Узел [A, C, B]:
        - Пройденный путь: A → C → B (стоимость = 15 + 35 = 50).
        - Остался город D.
        - Нижняя граница:
            - Минимальное ребро из D: min(20, 25) = 20.
            - Сумма: 50 + 20 = 70.
        - Нижняя граница: 70.

    - Узел [A, C, D]:
        - Пройденный путь: A → C → D (стоимость = 15 + 30 = 45).
        - Остался город B.
        - Нижняя граница:
            - Минимальное ребро из B: min(10, 25) = 10.
            - Сумма: 45 + 10 = 55.
        - Нижняя граница: 55.

8. Проверка завершения:
    - Узел [A, C, B, D]:
        - Полный маршрут: A → C → B → D → A.
        - Стоимость: 15 + 35 + 25 + 20 = 95.
        - 95 > 80 (верхняя граница), поэтому этот маршрут отсекается.

    - Узел [A, C, D, B]:
        - Полный маршрут: A → C → D → B → A.
        - Стоимость: 15 + 30 + 25 + 10 = 80.
        - 80 ≤ 80, поэтому обновляем верхнюю границу: 80.

9. Отсечение:
    - Узел [A, C, B] имеет нижнюю границу 70, что меньше текущей верхней границы (80), поэтому он исследуется дальше.

10. Завершение:
    - Оптимальный маршрут: A → C → D → B → A со стоимостью 80.

Итог:
Оптимальный маршрут: A → C → D → B → A.

Стоимость: 80.

Этот пример демонстрирует, как метод ветвей и границ позволяет эффективно находить оптимальное решение, отсекая
неперспективные ветви.
